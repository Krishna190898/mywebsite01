<!DOCTYPE html>
<html>

<head>
    <title>Checkout - Mr KKR Store</title>
    <link rel="stylesheet" href="checkout.css">
</head>

<body>

    <div class="checkout-wrapper">

        <div class="checkout-box" id="checkoutBox">

            <h2>Checkout</h2>

            <div id="checkoutContainer" class="products"></div>

            <h3 id="finalTotal"></h3>

            <form onsubmit="placeOrder(event)">
                <h3 class="ship-title">Shipping Details</h3>

                <input type="text" placeholder="Full Name" required>
                <input type="text" placeholder="Address" required>
                <input type="text" placeholder="City" required>
                <input type="text" placeholder="Pincode" required>
                <input type="number" placeholder="Mobile No" required>

                <div class="btn-wrapper">
                    <button type="submit" class="place-btn">Place Order</button>
                </div>
            </form>

        </div>

    </div>

    <script>

        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let container = document.getElementById("checkoutContainer");
        let total = 0;

        if (cart.length === 0) {
            container.innerHTML = "<p class='empty'>Your cart is empty!</p>";
        }

        cart.forEach(item => {

            total += item.price * item.quantity;

            container.innerHTML += `
            <div class="checkout-item">
                <img src="${item.image}">
                <div class="item-info">
                    <p class="title">${item.title.substring(0, 40)}</p>
                    <p class="price">â‚¹ ${item.price} Ã— ${item.quantity}</p>
                </div>
            </div>
        `;
        });

        document.getElementById("finalTotal").innerText =
            "Grand Total: â‚¹ " + total.toFixed(2);

        function placeOrder(event) {
            event.preventDefault();

            if (cart.length === 0) {
                alert("Cart is empty!");
                return;
            }

            localStorage.removeItem("cart");

            document.getElementById("checkoutBox").innerHTML = `
                <div class="success-box">
                    <h2>âœ… Order Placed Successfully!</h2>
                    <p>Your order has been confirmed ðŸŽ‰</p>
                    <a href="index.html" class="home-btn">Back to Home</a>
                </div>
            `;
        }

    </script>

</body>

</html>